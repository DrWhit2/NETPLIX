/* 기본 */
*{box-sizing:border-box}
html,body{margin:0;padding:0;height:100%;background:#000;color:#fff;
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,
  "Apple SD Gothic Neo","Noto Sans KR","Malgun Gothic",sans-serif}
img{display:block;max-width:100%}
button{font:inherit;color:inherit;background:none;border:0;cursor:pointer}
a{color:inherit;text-decoration:none}
.hidden{display:none!important}

/* Header */
.nf-header{position:sticky;top:0;z-index:40;height:56px;display:flex;align-items:center;gap:16px;
  padding:0 min(24px,4vw);background:linear-gradient(180deg,rgba(0,0,0,.9),rgba(0,0,0,.35))}
.logo{color:#e50914;font-weight:900;letter-spacing:.08em;font-size:clamp(22px,2.2vw,28px)}
.nf-nav{display:flex;gap:12px}
.nf-nav a{color:#ddd;padding:6px 10px;border-radius:8px;font-weight:700}
.nf-nav a.active,.nf-nav a:hover{background:rgba(255,255,255,.14);color:#fff}

/* Profile */
.profile-screen{position:fixed;inset:0;z-index:60;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;background:#000}
.profile-title{font-size:clamp(14px,1.9vw,18px);font-weight:600;margin:0 0 10px;color:#fff}
.profile-list{display:flex;gap:14px;flex-wrap:wrap;justify-content:center;align-items:center;margin-top:0}
.profile{width:clamp(110px,15vw,180px);aspect-ratio:1/1;border-radius:0;border:1px solid #262626;background:#111;overflow:hidden;transition:transform .14s ease}
.profile img{width:100%;aspect-ratio:1/1;object-fit:cover;border-radius:10px}
.profile span{font-weight:800}
.profile:hover{transform:none}

/* Banner */
.nf-banner{position:relative;z-index:20;height:clamp(420px,60vh,680px);display:flex;align-items:flex-end;background:#111 center/contain no-repeat;padding:28px 22px 38px;overflow:hidden}
.nf-banner::before{content:"";position:absolute;inset:0;z-index:0;background:rgba(0,0,0,.22)}
.nf-banner::after{content:"";position:absolute;left:0;right:0;bottom:0;height:48%;z-index:0;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,.88) 100%)}
.banner-content{position:relative;z-index:1;max-width:min(1100px,92vw);margin-inline:auto}
#banner-title{font-size:clamp(30px,4.6vw,52px);font-weight:900;margin-bottom:10px;text-shadow:0 2px 16px rgba(0,0,0,.8)}
#banner-overview{color:#f2f2f2;font-size:clamp(14px,1.6vw,17px);line-height:1.6;margin-bottom:12px;text-shadow:0 1px 10px rgba(0,0,0,.7)}
.banner-meta{display:flex;gap:12px;color:#dcdcdc;margin-bottom:12px}
.banner-actions{display:flex;gap:10px}
.btn{display:inline-flex;align-items:center;justify-content:center;border-radius:6px;padding:9px 16px;font-weight:500;line-height:1} /* 굵은 볼드 제거 */
.btn-primary{background:#fff;color:#000}.btn-primary:hover{background:#e8e8e8}
.btn-secondary{background:rgba(109,109,110,.7);color:#fff}.btn-secondary:hover{background:rgba(109,109,110,.55)}

/* Rows centered */
.row{max-width:min(1200px,92vw);margin:0 auto;padding-left:0}
.row h3{font-size:18px;margin-bottom:10px;font-weight:900}
.scroller{display:flex;gap:12px;overflow-x:auto;padding:8px 0 12px;scrollbar-width:thin;align-items:center;justify-content:flex-start}
.scroller::-webkit-scrollbar{height:8px}.scroller::-webkit-scrollbar-thumb{background:#555;border-radius:8px}
.card{flex:0 0 auto;width:clamp(110px,13vw,160px);aspect-ratio:2/3;border-radius:8px;overflow:hidden;background:#111;border:1px solid #262626;transition:transform .15s ease,box-shadow .15s ease}
.card img{width:100%;height:100%;object-fit:cover}
.card:hover{transform:translateY(-2px);box-shadow:0 12px 28px rgba(0,0,0,.45)}

/* Modal */
#overlay[hidden]{display:none!important}
#overlay{position:fixed;inset:0;z-index:50;display:grid;place-items:center;background:rgba(0,0,0,.65)}
.modal{width:min(980px,92vw);max-height:92vh;overflow:auto;border-radius:18px;background:#0b0b0b;border:1px solid #262626;box-shadow:0 40px 120px rgba(0,0,0,.7)}
.modal-hero{position:relative;height:clamp(280px,42vh,480px);overflow:hidden;border-bottom:1px solid #1d1d1d}
.modal-hero img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;object-position:center top;transform:scale(1.02)}
.hero-tint{position:absolute;inset:0;z-index:0;background:linear-gradient(180deg,rgba(0,0,0,.12) 0%,rgba(0,0,0,.38) 52%,rgba(0,0,0,.90) 100%)}
.hero-topbar{position:relative;z-index:2;display:flex;justify-content:flex-end;padding:10px}
.icon-btn{width:36px;height:36px;border-radius:50%;background:rgba(0,0,0,.55);color:#fff;display:grid;place-items:center;font-weight:900}
.icon-btn:hover{background:rgba(0,0,0,.7)}
.hero-body{position:absolute;left:16px;right:16px;bottom:12px;z-index:2}
.titlepack{display:flex;flex-direction:column;gap:8px}
#modal-title{font-size:clamp(20px,3vw,28px);font-weight:900;margin:0}
.badge-set{display:flex;gap:8px;flex-wrap:wrap}
.badge{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;background:rgba(255,255,255,.12);color:#eee;font-size:.86rem;border:1px solid rgba(255,255,255,.18)}
.badge.match{color:#e50914;background:rgba(229,9,20,.16);border-color:rgba(229,9,20,.36)} /* 일치 배지 = 빨강 */
.modal-body{padding:16px 16px 18px}
.modal-body.modal-grid{display:grid;grid-template-columns:1fr;row-gap:16px}
.sec-title{margin:0 0 8px;font-size:15px;font-weight:900;color:#eee}
.facts{display:grid;grid-template-columns:auto 1fr;gap:6px 12px;margin:0}
.facts dt{color:#aaa}.facts dd{margin:0;color:#e6e6e6}

/* Rating */
.rating{display:flex;align-items:center;gap:10px}
.stars{display:flex;gap:4px}.star{font-size:18px;opacity:.45}.star.is-on{opacity:1;color:#ffd54a}
.rating-value{opacity:.9}

/* Episodes order (소개 아래) */
#grid-top{order:0}
.grid-overview{order:1}
.grid-facts{order:2}
.grid-episodes{order:3}
.grid-episodes .season-badge{display:inline-block;margin-left:6px;padding:2px 8px;border-radius:999px;font-size:.78rem;color:#e5e5e5;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.18)}
.episodes{list-style:none;margin:8px 0 0;padding:0;display:flex;flex-direction:column;gap:10px}
.ep{display:grid;align-items:center;gap:12px;grid-template-columns:36px 220px 1fr;background:linear-gradient(180deg,#121212,#101010);border:1px solid #232323;border-radius:0;padding:10px}
.ep-no{font-weight:900;color:#fff;opacity:.9}
.ep-thumb{width:200px;height:112px;border-radius:0;overflow:hidden;background:#000}
.ep-body{display:flex;flex-direction:column;gap:6px}
.ep-title{display:flex;justify-content:space-between;align-items:center;gap:8px}
.ep-title strong{font-weight:800}
.ep-meta{color:#cfcfcf;font-size:.95rem}
.ep-desc{color:#dcdcdc;line-height:1.55;margin:0}

@media (max-width:820px){
  .ep{grid-template-columns:32px 180px 1fr}
  .ep-thumb{width:200px;height:112px;border-radius:0;overflow:hidden;background:#000}
}
@media (max-width:560px){
  .nf-header{gap:10px}
  .ep{grid-template-columns:28px 150px 1fr}
  .ep-thumb{width:200px;height:112px;border-radius:0;overflow:hidden;background:#000}
}

/* Layering */
.rows{position:relative;z-index:10}
.nf-banner{z-index:20}
#overlay{z-index:50}


/* === Custom fixes (2025-09-05) === */

/* Pillarbox side focus: subtle grayscale side margins across the viewport */
:root{ --pillar: clamp(10px, 3.5vw, 48px); }
body::before,
body::after{
  content:"";
  position:fixed; top:0; bottom:0; width:var(--pillar);
  pointer-events:none; z-index:5;
  /* Soft grayscale fade to add visual focus toward center */
  background:linear-gradient(to right, rgba(255,255,255,0.08), rgba(255,255,255,0));
}
body::after{
  right:0; left:auto;
  transform:scaleX(-1);
}

/* Ensure the large top banner shows full image without horizontal cropping */
.nf-banner{ background-color:#000; }
@media (min-width: 0px){
  .nf-banner{ background-position:center center; background-repeat:no-repeat; }
}

/* Profile selection: keep content perfectly centered even on short viewports */
.profile-screen{position:fixed;inset:0;z-index:60;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;background:#000}
.profile-title{font-size:clamp(14px,1.9vw,18px);font-weight:600;margin:0 0 10px;color:#fff}
.profile-list{display:flex;gap:14px;flex-wrap:wrap;justify-content:center;align-items:center;margin-top:0}

/* Modal episode list: improve mobile layout and spacing */
.modal-body{ padding: clamp(18px, 4vw, 28px); }
.ep{ align-items:flex-start; }
.ep-title{ line-height:1.35; }
.ep-desc{ text-align:left; word-break:keep-all; }

@media (max-width: 560px){
  .modal{ width: min(960px, 96vw); }
  .modal-body{ padding: 18px; }
  .ep{ grid-template-columns: 24px min(42vw, 160px) 1fr; gap:10px; }
  .ep-thumb{width:200px;height:112px;border-radius:0;overflow:hidden;background:#000}
  .ep-body{ padding-right:6px; }
  .ep-desc{ font-size: .98rem; line-height:1.6; }
}

/* Respect safe areas on mobile */
.nf-header{ padding-left: max(16px, env(safe-area-inset-left)); padding-right:max(16px, env(safe-area-inset-right)); }

/* Profile box: perfect square and no red focus ring */
.profile-list{display:flex;gap:14px;flex-wrap:wrap;justify-content:center;align-items:center;margin-top:0}
.profile{width:clamp(110px,15vw,180px);aspect-ratio:1/1;border-radius:0;border:1px solid #262626;background:#111;overflow:hidden;transition:transform .14s ease}
.profile img{width:72%;height:72%;object-fit:cover;border-radius:6px}
.profile:focus,.profile:focus-visible,.profile:active{outline:none;box-shadow:none}
.profile span{font-size:.92rem}

.modal .meta-box,
.modal .info-box{display:flex;align-items:center;justify-content:center;text-align:center}


.profile{width:clamp(110px,15vw,180px);aspect-ratio:1/1;border-radius:0;border:1px solid #262626;background:#111;overflow:hidden;transition:transform .14s ease}
.profile img{width:100%;height:100%;object-fit:cover}
.profile:hover{transform:none}
.profile:focus,.profile:focus-visible,.profile:active{outline:none;box-shadow:none}


.ep-thumb{border-radius:0}

.episodes, .episodes .ep, .episodes .ep * { border-radius:0 !important; }


.profile.clicked{ transform: scale(1.04); }


/* === FORCE center + square profile (override) === */
.profile-screen{position:fixed;inset:0;z-index:60;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;background:#000}
.profile-title{font-size:clamp(14px,1.9vw,18px);font-weight:600;margin:0 0 10px;color:#fff}
.profile-list{display:flex;gap:14px;flex-wrap:wrap;justify-content:center;align-items:center;margin-top:0}
.profile{width:clamp(110px,15vw,180px);aspect-ratio:1/1;border-radius:0;border:1px solid #262626;background:#111;overflow:hidden;transition:transform .14s ease}
.profile:hover{transform:none}
.profile:focus,.profile:focus-visible,.profile:active{outline:none;box-shadow:none}
